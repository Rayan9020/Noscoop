-- إضافة مكتبة Rayfield
local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Rayfield/main/source'))()

-- إنشاء نافذة
local Window = Rayfield:CreateWindow({
    Name = "by abo_3le ",
    LoadingTitle = "Loading...",
    LoadingSubtitle = "by zioteam",
    ConfigurationSaving = {
       Enabled = true,
       FolderName = nil,
       FileName = "ExampleConfig"
    },
    Discord = {
       Enabled = false,
       Invite = "noinvitelink",
       RememberJoins = true
    },
    KeySystem = true,
    KeySettings = {
       Title = "Key System",
       Subtitle = "Key System",
       Note = "Join the discord (discord.gg/abcdefg)",
       FileName = "KeyFile",
       SaveKey = true,
       GrabKeyFromSite = false,
       Key = "Key2020"
    }
})

-- إنشاء تبويب جديد
local PlayerTab = Window:CreateTab("Player", 4483362458)

-- دالة للعثور على أقرب لاعب
local function findNearestPlayer()
    local player = game.Players.LocalPlayer
    local nearestPlayer = nil
    local shortestDistance = math.huge

    for _, targetPlayer in pairs(game.Players:GetPlayers()) do
        if targetPlayer ~= player and targetPlayer.Character and targetPlayer.Character:FindFirstChild("Head") then
            local distance = (player.Character.Head.Position - targetPlayer.Character.Head.Position).magnitude
            if distance < shortestDistance then
                nearestPlayer = targetPlayer
                shortestDistance = distance
            end
        end
    end

    return nearestPlayer
end

-- متغيرات
local newHitboxSize = Vector3.new(20, 20, 20)
local aimAtNearestPlayer = false

-- إضافة شريط تمرير (Slider) لتحديد حجم الـHitbox
PlayerTab:CreateSlider({
    Name = "Hitbox Size",
    Range = {50, 50}, -- نطاق القيم المسموح بها
    Increment = 1, -- الزيادة بمقدار 1
    Suffix = "Size",
    CurrentValue = 50,
    Callback = function(value)
        newHitboxSize = Vector3.new(value, value, value)
    end
})

-- إضافة زر لتفعيل/إيقاف التوجيه لأقرب لاعب
PlayerTab:CreateToggle({
    Name = "Aim bot",
    CurrentValue = false,
    Callback = function(value)
        aimAtNearestPlayer = value
    end
})

-- إضافة زر لتغيير حجم الـHitbox
PlayerTab:CreateButton({
    Name = " Hitbox",
    Callback = function()
        game:GetService("RunService").RenderStepped:Connect(function()
            local player = game.Players.LocalPlayer
            for _, enemy in pairs(game.Players:GetPlayers()) do
                if enemy ~= player and enemy.Character and enemy.Character:FindFirstChild("HumanoidRootPart") then
                    local hrp = enemy.Character.HumanoidRootPart
                    hrp.Size = newHitboxSize
                    hrp.Transparency = 0.5
                    hrp.CanCollide = false
                end
            end
        end)
    end
})

-- تحديث الكاميرا لتوجيهها نحو رأس أقرب لاعب
game:GetService("RunService").RenderStepped:Connect(function()
    if aimAtNearestPlayer then
        local player = game.Players.LocalPlayer
        local nearestPlayer = findNearestPlayer()

        if nearestPlayer and nearestPlayer.Character and nearestPlayer.Character:FindFirstChild("Head") then
            local camera = workspace.CurrentCamera
            camera.CFrame = CFrame.new(camera.CFrame.Position, nearestPlayer.Character.Head.Position)
        end
    end
end)

-- الانتقال إلى لاعب آخر عند موت اللاعب الحالي
game.Players.LocalPlayer.CharacterAdded:Connect(function(character)
    character:WaitForChild("Humanoid").Died:Connect(function()
        wait(1) -- انتظار ثواني قبل الانتقال للاعب آخر
        local nearestPlayer = findNearestPlayer()
        if nearestPlayer then
            local player = game.Players.LocalPlayer
            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                player.Character:SetPrimaryPartCFrame(nearestPlayer.Character.HumanoidRootPart.CFrame)
            end
        end
    end)
end)
